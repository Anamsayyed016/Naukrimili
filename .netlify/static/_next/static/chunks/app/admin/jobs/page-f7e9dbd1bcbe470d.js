(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8711],{25907:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var l=a(95155),i=a(12115);function n(){let{jobs:e,loading:t,error:a,createJob:n,updateJob:o,deleteJob:s}=function(){let[e,t]=(0,i.useState)([]),[a,l]=(0,i.useState)(!1),[n,o]=(0,i.useState)(null),s=async()=>{l(!0),o(null);try{let e=await fetch("/api/jobs"),a=await e.json();t(a)}catch(e){o("Failed to fetch jobs")}finally{l(!1)}},c=async e=>{l(!0),o(null);try{if(!(await fetch("/api/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to create");await s()}catch(e){o("Failed to create job")}finally{l(!1)}},r=async(e,t)=>{l(!0),o(null);try{if(!(await fetch("/api/jobs/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Failed to update");await s()}catch(e){o("Failed to update job")}finally{l(!1)}},d=async e=>{l(!0),o(null);try{if(!(await fetch("/api/jobs/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete");await s()}catch(e){o("Failed to delete job")}finally{l(!1)}};return(0,i.useEffect)(()=>{s()},[]),{jobs:e,loading:a,error:n,fetchJobs:s,createJob:c,updateJob:r,deleteJob:d}}(),[c,r]=(0,i.useState)({title:"",description:"",location:""}),[d,u]=(0,i.useState)(null);return(0,l.jsxs)("div",{className:"p-6 bg-white rounded shadow max-w-xl mx-auto mt-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Manage Jobs"}),a&&(0,l.jsx)("div",{className:"text-red-500 mb-2",children:a}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),null!==d?(o(d,c),u(null)):n(c),r({title:"",description:"",location:""})},className:"flex flex-col gap-2 mb-4",children:[(0,l.jsx)("input",{className:"border px-2 py-1 rounded",placeholder:"Title",value:c.title,onChange:e=>r(t=>({...t,title:e.target.value}))}),(0,l.jsx)("input",{className:"border px-2 py-1 rounded",placeholder:"Description",value:c.description,onChange:e=>r(t=>({...t,description:e.target.value}))}),(0,l.jsx)("input",{className:"border px-2 py-1 rounded",placeholder:"Location",value:c.location,onChange:e=>r(t=>({...t,location:e.target.value}))}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-1 rounded",children:null!==d?"Update":"Add"}),null!==d&&(0,l.jsx)("button",{type:"button",className:"ml-2 text-gray-500",onClick:()=>{u(null),r({title:"",description:"",location:""})},children:"Cancel"})]}),(0,l.jsx)("ul",{children:e.map(e=>(0,l.jsxs)("li",{className:"flex items-center justify-between border-b py-2",children:[(0,l.jsxs)("span",{children:[e.title," - ",e.location]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{className:"text-blue-600",onClick:()=>{u(e.id),r({title:e.title,description:e.description,location:e.location})},children:"Edit"}),(0,l.jsx)("button",{className:"text-red-600",onClick:()=>s(e.id),children:"Delete"})]})]},e.id))}),t&&(0,l.jsx)("div",{className:"mt-2 text-gray-500",children:"Loading..."})]})}},95745:(e,t,a)=>{Promise.resolve().then(a.bind(a,25907))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=95745)),_N_E=e.O()}]);