(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6631],{20320:(e,t,a)=>{Promise.resolve().then(a.bind(a,63331))},63331:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var l=a(95155),n=a(12115);function i(){let{categories:e,loading:t,error:a,createCategory:i,updateCategory:s,deleteCategory:c}=function(){let[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)(!1),[i,s]=(0,n.useState)(null),c=async()=>{l(!0),s(null);try{let e=await fetch("/api/categories"),a=await e.json();t(a)}catch(e){s("Failed to fetch categories")}finally{l(!1)}},r=async e=>{l(!0),s(null);try{if(!(await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})})).ok)throw Error("Failed to create");await c()}catch(e){s("Failed to create category")}finally{l(!1)}},o=async(e,t)=>{l(!0),s(null);try{if(!(await fetch("/api/categories/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})})).ok)throw Error("Failed to update");await c()}catch(e){s("Failed to update category")}finally{l(!1)}},d=async e=>{l(!0),s(null);try{if(!(await fetch("/api/categories/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete");await c()}catch(e){s("Failed to delete category")}finally{l(!1)}};return(0,n.useEffect)(()=>{c()},[]),{categories:e,loading:a,error:i,fetchCategories:c,createCategory:r,updateCategory:o,deleteCategory:d}}(),[r,o]=(0,n.useState)(""),[d,u]=(0,n.useState)(null),[h,m]=(0,n.useState)("");return(0,l.jsxs)("div",{className:"p-6 bg-white rounded shadow max-w-xl mx-auto mt-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Manage Categories"}),a&&(0,l.jsx)("div",{className:"text-red-500 mb-2",children:a}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),null!==d?(s(d,h),u(null),m("")):(i(r),o(""))},className:"flex gap-2 mb-4",children:[(0,l.jsx)("input",{className:"border px-2 py-1 rounded flex-1",placeholder:"Category name",value:null!==d?h:r,onChange:e=>null!==d?m(e.target.value):o(e.target.value)}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-1 rounded",children:null!==d?"Update":"Add"}),null!==d&&(0,l.jsx)("button",{type:"button",className:"ml-2 text-gray-500",onClick:()=>{u(null),m("")},children:"Cancel"})]}),(0,l.jsx)("ul",{children:e.map(e=>(0,l.jsxs)("li",{className:"flex items-center justify-between border-b py-2",children:[d===e.id?null:(0,l.jsx)("span",{children:e.name}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{className:"text-blue-600",onClick:()=>{u(e.id),m(e.name)},children:"Edit"}),(0,l.jsx)("button",{className:"text-red-600",onClick:()=>c(e.id),children:"Delete"})]})]},e.id))}),t&&(0,l.jsx)("div",{className:"mt-2 text-gray-500",children:"Loading..."})]})}}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=20320)),_N_E=e.O()}]);