(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8733],{19681:(e,a,t)=>{Promise.resolve().then(t.bind(t,54176))},54176:(e,a,t)=>{"use strict";t.d(a,{default:()=>n});var l=t(95155),s=t(12115);function n(){let{users:e,loading:a,error:t,createUser:n,updateUser:i,deleteUser:r}=function(){let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)(!1),[n,i]=(0,s.useState)(null),r=async()=>{l(!0),i(null);try{let e=await fetch("/api/users"),t=await e.json();a(t)}catch(e){i("Failed to fetch users")}finally{l(!1)}},c=async e=>{l(!0),i(null);try{if(!(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to create");await r()}catch(e){i("Failed to create user")}finally{l(!1)}},d=async(e,a)=>{l(!0),i(null);try{if(!(await fetch("/api/users/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to update");await r()}catch(e){i("Failed to update user")}finally{l(!1)}},o=async e=>{l(!0),i(null);try{if(!(await fetch("/api/users/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete");await r()}catch(e){i("Failed to delete user")}finally{l(!1)}};return(0,s.useEffect)(()=>{r()},[]),{users:e,loading:t,error:n,fetchUsers:r,createUser:c,updateUser:d,deleteUser:o}}(),[c,d]=(0,s.useState)({name:"",email:""}),[o,u]=(0,s.useState)(null);return(0,l.jsxs)("div",{className:"p-6 bg-white rounded shadow max-w-xl mx-auto mt-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Manage Users"}),t&&(0,l.jsx)("div",{className:"text-red-500 mb-2",children:t}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),null!==o?(i(o,c),u(null)):n(c),d({name:"",email:""})},className:"flex flex-col gap-2 mb-4",children:[(0,l.jsx)("input",{className:"border px-2 py-1 rounded",placeholder:"Name",value:c.name,onChange:e=>d(a=>({...a,name:e.target.value}))}),(0,l.jsx)("input",{className:"border px-2 py-1 rounded",placeholder:"Email",value:c.email,onChange:e=>d(a=>({...a,email:e.target.value}))}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-1 rounded",children:null!==o?"Update":"Add"}),null!==o&&(0,l.jsx)("button",{type:"button",className:"ml-2 text-gray-500",onClick:()=>{u(null),d({name:"",email:""})},children:"Cancel"})]}),(0,l.jsx)("ul",{children:e.map(e=>(0,l.jsxs)("li",{className:"flex items-center justify-between border-b py-2",children:[(0,l.jsxs)("span",{children:[e.name," - ",e.email]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{className:"text-blue-600",onClick:()=>{u(e.id),d({name:e.name,email:e.email})},children:"Edit"}),(0,l.jsx)("button",{className:"text-red-600",onClick:()=>r(e.id),children:"Delete"})]})]},e.id))}),a&&(0,l.jsx)("div",{className:"mt-2 text-gray-500",children:"Loading..."})]})}}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=19681)),_N_E=e.O()}]);