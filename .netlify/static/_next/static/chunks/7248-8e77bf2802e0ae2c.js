"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7248],{27248:(e,a,l)=>{l.d(a,{A:()=>h});var t=l(95155),s=l(12115),n=l(43444),r=l(85339),i=l(40646),o=l(29869),d=l(51154),c=l(57434),u=l(35169),p=l(97168),m=l(88482),f=l(41397);function x(e){var a,l,n,r,i,o,d,c,u,p,m,f;let{initialValues:x}=e;console.log("ResumeEditor received initialValues:",x);let[h,v]=(0,s.useState)({personal_info:{full_name:"",email:"",phone:"",location:{city:"",country:""},linkedin:null,portfolio:null},experience:[],education:[],skills:{technical:[],soft:[],certifications:[]},total_experience_years:0,summary:"",...x});console.log("Form state initialized:",h);let g=(e,a,l,t)=>{v(s=>{let n={...s};return Array.isArray(n[e])&&"number"==typeof t?n[e][t][a]=l:e in n?n[e][a]=l:n[e]=l,n})};return(0,t.jsxs)("form",{className:"space-y-6 max-w-2xl mx-auto bg-white p-6 rounded shadow",onSubmit:e=>{e.preventDefault(),console.log("Final resume data:",h),alert("Resume saved! (see console)")},children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Edit Resume"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Personal Info"}),(0,t.jsx)("input",{className:"input",placeholder:"Full Name",value:(null==(a=h.personal_info)?void 0:a.full_name)||"",onChange:e=>g("personal_info","full_name",e.target.value)}),(0,t.jsx)("input",{className:"input",placeholder:"Email",value:(null==(l=h.personal_info)?void 0:l.email)||"",onChange:e=>g("personal_info","email",e.target.value)}),(0,t.jsx)("input",{className:"input",placeholder:"Phone",value:(null==(n=h.personal_info)?void 0:n.phone)||"",onChange:e=>g("personal_info","phone",e.target.value)}),(0,t.jsx)("input",{className:"input",placeholder:"City",value:(null==(i=h.personal_info)||null==(r=i.location)?void 0:r.city)||"",onChange:e=>{var a;return g("personal_info","location",{...null==(a=h.personal_info)?void 0:a.location,city:e.target.value})}}),(0,t.jsx)("input",{className:"input",placeholder:"Country",value:(null==(d=h.personal_info)||null==(o=d.location)?void 0:o.country)||"",onChange:e=>{var a;return g("personal_info","location",{...null==(a=h.personal_info)?void 0:a.location,country:e.target.value})}}),(0,t.jsx)("input",{className:"input",placeholder:"LinkedIn",value:(null==(c=h.personal_info)?void 0:c.linkedin)||"",onChange:e=>g("personal_info","linkedin",e.target.value)}),(0,t.jsx)("input",{className:"input",placeholder:"Portfolio",value:(null==(u=h.personal_info)?void 0:u.portfolio)||"",onChange:e=>g("personal_info","portfolio",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Experience"}),(h.experience||[]).map((e,a)=>(0,t.jsxs)("div",{className:"border p-3 rounded mb-2",children:[(0,t.jsx)("input",{className:"input",placeholder:"Job Title",value:e.job_title||"",onChange:e=>g("experience","job_title",e.target.value,a)}),(0,t.jsx)("input",{className:"input",placeholder:"Company",value:e.company||"",onChange:e=>g("experience","company",e.target.value,a)}),(0,t.jsx)("input",{className:"input",placeholder:"Start Date",value:e.start_date||"",onChange:e=>g("experience","start_date",e.target.value,a)}),(0,t.jsx)("input",{className:"input",placeholder:"End Date",value:e.end_date||"",onChange:e=>g("experience","end_date",e.target.value,a)}),(0,t.jsx)("input",{className:"input",placeholder:"Current",type:"checkbox",checked:e.current||!1,onChange:e=>g("experience","current",e.target.checked,a)})," Current",(0,t.jsx)("textarea",{className:"input",placeholder:"Description (comma separated)",value:(e.description||[]).join(", "),onChange:e=>g("experience","description",e.target.value.split(","),a)})]},a))]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Education"}),(h.education||[]).map((e,a)=>(0,t.jsxs)("div",{className:"border p-3 rounded mb-2",children:[(0,t.jsx)("input",{className:"input",placeholder:"Degree",value:e.degree||"",onChange:e=>g("education","degree",e.target.value,a)}),(0,t.jsx)("input",{className:"input",placeholder:"Institution",value:e.institution||"",onChange:e=>g("education","institution",e.target.value,a)}),(0,t.jsx)("input",{className:"input",placeholder:"Field of Study",value:e.field_of_study||"",onChange:e=>g("education","field_of_study",e.target.value,a)}),(0,t.jsx)("input",{className:"input",placeholder:"Graduation Year",value:e.graduation_year||"",onChange:e=>g("education","graduation_year",e.target.value,a)})]},a))]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Skills"}),(0,t.jsx)("input",{className:"input",placeholder:"Technical Skills (comma separated)",value:((null==(p=h.skills)?void 0:p.technical)||[]).join(", "),onChange:e=>g("skills","technical",e.target.value.split(","))}),(0,t.jsx)("input",{className:"input",placeholder:"Soft Skills (comma separated)",value:((null==(m=h.skills)?void 0:m.soft)||[]).join(", "),onChange:e=>g("skills","soft",e.target.value.split(","))}),(0,t.jsx)("input",{className:"input",placeholder:"Certifications (comma separated)",value:((null==(f=h.skills)?void 0:f.certifications)||[]).join(", "),onChange:e=>g("skills","certifications",e.target.value.split(","))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{className:"input",placeholder:"Total Experience (years)",value:h.total_experience_years||0,onChange:e=>g("","total_experience_years",e.target.value)}),(0,t.jsx)("textarea",{className:"input",placeholder:"Summary",value:h.summary||"",onChange:e=>g("","summary",e.target.value)})]}),(0,t.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded font-semibold hover:bg-blue-700 transition",children:"Save Resume"})]})}function h(e){let{onUploadComplete:a,className:l=""}=e,[h,v]=(0,s.useState)(null),[g,j]=(0,s.useState)(0),{uploadResume:y,loading:N,aiData:b,error:_}=function(){let[e,a]=(0,s.useState)(!1),[l,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(null);return{uploadResume:async e=>{a(!0),r(null),t(null);try{let a=new FormData;a.append("resume",e);let l=await fetch("/api/resumes/upload",{method:"POST",body:a}),s=await l.json();s.success?t({parsedResume:s.resume.aiData,atsScore:s.resume.atsScore,suggestions:["Add more specific technical skills","Include quantifiable achievements","Optimize keywords for ATS systems"]}):r(s.message||"Upload failed")}catch(e){r("Network error occurred")}finally{a(!1)}},loading:e,aiData:l,error:n}}(),[w,C]=(0,s.useState)(null),[k,S]=(0,s.useState)(!1),R=async()=>{if(h)try{let e=setInterval(()=>{j(e=>e>=90?e:e+10)},200);await y(h),clearInterval(e),j(100),a&&b&&a(b),(null==b?void 0:b.parsedResume)&&S(!0)}catch(e){C(_||"Failed to upload resume. Please try again.")}};return(0,t.jsx)("div",{className:"w-full max-w-md mx-auto ".concat(l),children:k?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg",children:[(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsxs)(p.$,{variant:"ghost",size:"sm",onClick:()=>S(!1),className:"mb-4",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Back to Upload"]})}),(0,t.jsx)(x,{initialValues:(null==b?void 0:b.parsedResume)||{}})]}):(0,t.jsxs)(m.Zp,{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-primary/10 flex items-center justify-center",children:w||_?(0,t.jsx)(r.A,{className:"w-8 h-8 text-red-500"}):b?(0,t.jsx)(i.A,{className:"w-8 h-8 text-green-500"}):(0,t.jsx)(o.A,{className:"w-8 h-8 text-primary"})})}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Upload Your Resume"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload your resume in PDF format or create one manually"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{var a;let l=null==(a=e.target.files)?void 0:a[0];l&&("application/pdf"===l.type?(v(l),C(null),j(0)):(C("Please upload a PDF file"),v(null)))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20",disabled:N}),h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Selected: ",h.name]}),g>0&&(0,t.jsx)(f.k,{value:g,className:"h-2"}),(0,t.jsx)(p.$,{onClick:R,disabled:N,className:"w-full",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.A,{className:"w-4 h-4 mr-2 animate-spin"})," Uploading..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{className:"w-4 h-4 mr-2"})," Upload Resume"]})})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("span",{className:"w-full border-t"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,t.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),(0,t.jsxs)(p.$,{variant:"outline",className:"w-full",onClick:()=>S(!0),children:[(0,t.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Create Resume Manually"]}),(w||_)&&(0,t.jsx)("div",{className:"p-3 rounded bg-red-50 text-red-600 text-sm",children:w||_}),b&&(0,t.jsx)("div",{className:"p-3 rounded bg-green-50 text-green-600 text-sm",children:"Resume uploaded successfully!"})]})]})})}},41397:(e,a,l)=>{l.d(a,{k:()=>i});var t=l(95155),s=l(12115),n=l(55863),r=l(53999);let i=s.forwardRef((e,a)=>{let{className:l,value:s,...i}=e;return(0,t.jsx)(n.bL,{ref:a,className:(0,r.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",l),...i,children:(0,t.jsx)(n.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});i.displayName=n.bL.displayName},53999:(e,a,l)=>{l.d(a,{cn:()=>n});var t=l(52596),s=l(39688);function n(){for(var e=arguments.length,a=Array(e),l=0;l<e;l++)a[l]=arguments[l];return(0,s.QP)((0,t.$)(a))}},88482:(e,a,l)=>{l.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>r,aR:()=>i});var t=l(95155),s=l(12115),n=l(53999);let r=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",l),...s})});r.displayName="Card";let i=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",l),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",l),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",l),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",l),...s})});c.displayName="CardContent",s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",l),...s})}).displayName="CardFooter"},97168:(e,a,l)=>{l.d(a,{$:()=>d});var t=l(95155),s=l(12115),n=l(99708),r=l(74466),i=l(53999);let o=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,a)=>{let{className:l,variant:s,size:r,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,t.jsx)(u,{className:(0,i.cn)(o({variant:s,size:r,className:l})),ref:a,...c})});d.displayName="Button"}}]);