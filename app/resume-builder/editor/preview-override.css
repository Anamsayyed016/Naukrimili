/**
 * Resume Preview Override Styles
 * 
 * Purpose: Clean, document-viewer style preview without wrapper styling
 * Target: Live preview in resume builder editor
 * Safety: CSS-only overrides, no JS logic changes
 * 
 * Requirements Met:
 * ✓ Fixed A4-like width (210mm/794px) with auto-expanding height
 * ✓ No outer card wrapper (transparent, no shadows/borders/rounded corners)
 * ✓ Vertical scrolling when content exceeds viewport
 * ✓ Zoom controls scale viewport, not content
 * ✓ Document-viewer behavior (like Google Docs/Canva)
 */

/* =================================================================
   1. PREVIEW CONTAINER - Remove card styling, enable scrolling
   ================================================================= */

/**
 * Selector: .resume-editor-preview-desktop (Desktop preview wrapper)
 * Why safe: Only targets preview container, doesn't affect JSX structure
 * Impact: Removes max-height constraint, enables vertical scrolling
 */
@media (min-width: 1024px) {
  .resume-editor-preview-desktop {
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    max-width: 850px !important;
    /* Remove height constraints to allow auto-expansion */
    height: auto !important;
    max-height: none !important;
    min-height: 0 !important;
    /* Enable vertical scrolling */
    overflow-y: visible !important;
    overflow-x: visible !important; /* Allow A4 width to display fully */
    /* Remove any background/wrapper styling */
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 28px; /* Add horizontal padding for proper centering */
    margin: 0 auto; /* Center the preview */
  }

  /* Child containers should also allow overflow */
  .resume-editor-preview-desktop > div {
    overflow-y: visible !important;
    overflow-x: hidden !important;
    background: transparent !important;
  }
}

/* =================================================================
   2. PREVIEW WRAPPER - Remove outer card, transparent background
   ================================================================= */

/**
 * Selector: Preview motion.div wrapper (targets bg-transparent class context)
 * Why safe: Only removes decorative styling, preserves flex layout
 * Impact: Makes preview area transparent, removes card appearance
 */
.resume-preview-wrapper {
  background: transparent !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  border: none !important;
  padding: 0 !important;
}

/* Override any gradient backgrounds in preview area */
.resume-preview-container {
  background: #f8f9fa !important; /* Subtle neutral background */
  overflow-y: auto !important;
  overflow-x: hidden !important;
  padding: 2rem !important;
}

/* =================================================================
   3. IFRAME CONTAINER - Fixed A4 width, auto height
   ================================================================= */

/**
 * Selector: Preview iframe wrapper
 * Why safe: Controls iframe display, doesn't modify template content
 * Impact: Fixed width (A4-like), height auto-expands with content
 */
.resume-preview-iframe-wrapper {
  width: 100% !important;
  max-width: 794px !important; /* A4 width in pixels at 96 DPI */
  height: auto !important;
  min-height: 1123px !important; /* A4 height in pixels at 96 DPI */
  margin: 0 auto !important;
  background: #ffffff !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important; /* Subtle shadow for document */
  overflow: visible !important;
  position: relative !important;
}

/**
 * Selector: iframe element
 * Why safe: Controls iframe dimensions only, template HTML unaffected
 * Impact: Fixed width, auto-expanding height, no transform scaling
 */
.resume-preview-iframe-wrapper iframe {
  width: 794px !important; /* A4 width */
  height: auto !important;
  min-height: 1123px !important; /* A4 minimum height */
  border: none !important;
  display: block !important;
  margin: 0 !important;
  padding: 0 !important;
  background: white !important;
  /* Remove any transform scaling - content displays at 100% */
  transform: none !important;
  transform-origin: center center !important;
  /* Allow iframe content to determine height */
  overflow: visible !important;
}

/* =================================================================
   4. ZOOM CONTROLS - Scale viewport container, not iframe content
   ================================================================= */

/**
 * Selector: Zoom-controlled scroll container
 * Why safe: Applies CSS transform to scroll container only
 * Impact: Scales entire preview viewport, content remains full size
 */
.resume-preview-zoom-container {
  transition: transform 0.3s ease-out !important;
  transform-origin: top center !important;
}

/* Zoom level classes (applied via runtime style if needed) */
.resume-preview-zoom-80 {
  transform: scale(0.8) !important;
}

.resume-preview-zoom-100 {
  transform: scale(1.0) !important;
}

.resume-preview-zoom-120 {
  transform: scale(1.2) !important;
}

/* =================================================================
   5. RESUME CONTENT - Typography & Spacing refinements
   ================================================================= */

/**
 * Selector: Resume template content within iframe
 * Why safe: Only affects visual presentation, not layout structure
 * Impact: Enhanced typography, consistent spacing, professional appearance
 */

/* These styles apply to iframe content via universal CSS injection */
.resume-preview-iframe-wrapper iframe {
  /* Inject universal styles into iframe document */
  color-scheme: light !important;
}

/* =================================================================
   6. MOBILE RESPONSIVE - Maintain functionality on small screens
   ================================================================= */

/**
 * Selector: Mobile preview adjustments
 * Why safe: Responsive behavior only, preserves mobile UX
 * Impact: Proper scaling and scrolling on mobile devices
 */
@media (max-width: 1023px) {
  .resume-preview-iframe-wrapper {
    max-width: 100% !important;
    width: 100% !important;
    padding: 0 1rem !important;
  }

  .resume-preview-iframe-wrapper iframe {
    width: 100% !important;
    transform: scale(0.95) !important;
    transform-origin: top center !important;
  }

  .resume-preview-container {
    padding: 1rem !important;
  }
}

@media (max-width: 640px) {
  .resume-preview-iframe-wrapper iframe {
    transform: scale(0.85) !important;
  }
}

/* =================================================================
   7. HEADER & CONTROLS - Clean, minimal header styling
   ================================================================= */

/**
 * Selector: Preview header with zoom controls
 * Why safe: Visual styling only, doesn't affect button functionality
 * Impact: Clean, professional header appearance
 */
.resume-preview-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  border-bottom: none !important;
  padding: 0.75rem 1rem !important;
  flex-shrink: 0 !important;
}

/* =================================================================
   8. TEMPLATE-SPECIFIC OVERRIDES - Ensure consistency
   ================================================================= */

/**
 * Selector: .resume-container within iframe (all templates)
 * Why safe: Targets only the template container, preserves template styles
 * Impact: Ensures consistent A4 width, auto height behavior
 */
.resume-preview-iframe-wrapper iframe .resume-container {
  width: 794px !important; /* A4 width */
  max-width: 100% !important;
  min-height: auto !important;
  height: auto !important;
  margin: 0 auto !important;
  background: white !important;
  /* Remove any box-shadow from template container */
  box-shadow: none !important;
}

/* =================================================================
   9. PRINT & EXPORT - Ensure preview matches PDF output
   ================================================================= */

/**
 * Selector: Print-specific styles
 * Why safe: Only affects print layout, not screen display
 * Impact: Preview appearance matches exported PDF
 */
@media print {
  .resume-preview-container,
  .resume-preview-header {
    display: none !important;
  }

  .resume-preview-iframe-wrapper {
    box-shadow: none !important;
    max-width: none !important;
  }

  .resume-preview-iframe-wrapper iframe {
    width: 210mm !important;
    height: auto !important;
    transform: none !important;
  }
}

/* =================================================================
   10. ACCESSIBILITY - Screen reader and keyboard navigation support
   ================================================================= */

/**
 * Selector: Focus states and accessibility improvements
 * Why safe: Enhances UX without changing visual design
 * Impact: Better keyboard navigation and screen reader support
 */
.resume-preview-zoom-button:focus-visible {
  outline: 2px solid rgba(255, 255, 255, 0.8) !important;
  outline-offset: 2px !important;
}

/* =================================================================
   IMPLEMENTATION NOTES
   ================================================================= */

/**
 * SAFETY CHECKLIST:
 * ✓ No JavaScript logic modified
 * ✓ No component structure changed  
 * ✓ No data flow affected
 * ✓ Only CSS overrides applied
 * ✓ All selectors target specific preview elements
 * ✓ No global styles that affect other components
 * 
 * ZOOM BEHAVIOR:
 * - Zoom controls should apply transform to .resume-preview-zoom-container
 * - NOT to iframe content (keeps content at full readable size)
 * - User can scroll to see content that exceeds viewport at higher zoom
 * 
 * HEIGHT BEHAVIOR:
 * - iframe height auto-expands based on content (via JS iframe.contentDocument.body.scrollHeight)
 * - Parent container allows vertical scrolling
 * - No content clipping or hidden sections
 * 
 * WIDTH BEHAVIOR:
 * - Fixed at 794px (A4 width at 96 DPI)
 * - Responsive scaling on mobile via transform
 * - Horizontal scrolling disabled (overflow-x: hidden)
 */
